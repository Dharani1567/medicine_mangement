{% extends "base.html" %}
{% block content %}
<h2>Add New Medicine</h2>
<form id="addForm">
  <div class="mb-3">
    <label>Name</label>
    <input type="text" id="name" class="form-control" required>
  </div>
  <div class="mb-3">
    <label>Batch Number</label>
    <input type="text" id="batch_number" class="form-control" required>
  </div>
  <div class="mb-3">
    <label>Expiry Date</label>
    <input type="date" id="expiry_date" class="form-control" required>
  </div>
  <div class="mb-3">
    <label>Quantity</label>
    <input type="number" id="quantity" class="form-control" required>
  </div>
  <div class="mb-3">
    <label>Supplier ID</label>
    <input type="number" id="supplier_id" class="form-control" required>
  </div>
  <div class="mb-3">
    <label>Category ID</label>
    <input type="number" id="category_id" class="form-control" required>
  </div>
  <div class="mb-3">
    <label>Price</label>
    <input type="number" id="price" class="form-control" step="0.01" required>
  </div>
  <button type="submit" class="btn btn-success">Add Medicine</button>
</form>

<script>
document.getElementById("addForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const data = {
    name: name.value,
    batch_number: batch_number.value,
    expiry_date: expiry_date.value,
    quantity: parseInt(quantity.value),
    supplier_id: parseInt(supplier_id.value),
    category_id: parseInt(category_id.value),
    price: parseFloat(price.value),
  };
  await fetch(`${API_BASE}/medicines`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data),
  });
  alert("Medicine added successfully!");
  window.location.href = "/medicines_page";
});
</script>
{% endblock %}
